import h from"./viewPanel-76981c48.js";import{_ as f,r as v,o as g,b as w,a as b,c as _,d as r,e as z,F as R,p as S,f as C}from"./index-1a9b8643.js";import"./converPosition-943e3ad4.js";const I="1.0",M={objects:[{name:"webcam",position:{x:-4.65,y:1.5,z:-.1},rotation:{x:0,y:90,z:0},scale:{x:1.2,y:1.2,z:1.2},components:[{type:"mp.planeRenderer",inputs:{transparent:!1}},{type:"mp.videoRenderer"},{type:"mp.videoStreamCapture",inputs:{deviceId:0}},{type:"mp.toggleState",inputs:{initialState:!1}},{type:"mp.planeRenderer",inputs:{transparent:!0,opacity:.8}},{type:"mp.canvasRenderer",inputs:{textureRes:{w:1024,h:1024}}},{type:"mp.canvasBorder",inputs:{position:{x:0,y:0},size:{h:1024,w:1024},radius:50}},{type:"mp.planeRenderer",inputs:{transparent:!0,opacity:.8,polygonOffset:!0,polygonOffsetFactor:-2}},{type:"mp.canvasRenderer",inputs:{textureRes:{w:256,h:256}}},{type:"mp.canvasText",inputs:{size:{h:256,w:256},text:"Click to enable webcam.",font:"normal bold 30px sans-serif",position:{x:70,y:70,z:0},textWidth:200}}],bindings:[[1,"src",2,"stream"],[0,"texture",1,"texture"],[2,"enabled",3,"state"],[0,"aspect",2,"aspect"],[5,"painter",6,"painter"],[4,"texture",5,"texture"],[4,"aspect",2,"aspect"],[8,"painter",9,"painter"],[7,"texture",8,"texture"],[7,"visible",3,"negated"],[7,"aspect",2,"aspect"]],events:[[3,"toggle",0,"INTERACTION.CLICK"]]},{name:"video",position:{x:-3,y:2.3,z:6.7},rotation:{x:0,y:90,z:0},scale:{x:1.75,y:1.75,z:1.75},components:[{type:"mp.tuner",inputs:{urls:["https://video2archives.earthcam.com/archives/_definst_/MP4:permanent/14162/2019/07/22/1300.mp4/chunklist_w1401431259.m3u8","https://www.bloomberg.com/media-manifest/streams/us.m3u8"]},events:{next:!0}},{type:"mp.hlsLoader"},{type:"mp.videoRenderer"},{type:"mp.planeRenderer",inputs:{transparent:!1,localScale:{x:.6,y:.6,z:.6},localPosition:{x:0,y:0,z:0}}},{type:"mp.toggleState",inputs:{initialState:!1}},{type:"mp.planeRenderer",inputs:{transparent:!0,opacity:.8,localScale:{x:.6,y:.6,z:.6}}},{type:"mp.canvasRenderer",inputs:{textureRes:{w:1024,h:1024}}},{type:"mp.canvasBorder",inputs:{position:{x:0,y:0},size:{h:1024,w:1024},radius:50}},{type:"mp.planeRenderer",inputs:{localScale:{x:.6,y:.6,z:.6},transparent:!0,opacity:.8,polygonOffset:!0,polygonOffsetFactor:-2}},{type:"mp.canvasRenderer",inputs:{textureRes:{w:512,h:512}}},{type:"mp.canvasText",inputs:{size:{h:512,w:512},text:"Click me.",font:"normal bold 40px sans-serif",position:{x:160,y:210,z:0},textWidth:250}},{type:"mp.planeRenderer",inputs:{localScale:{x:.08,y:.08,z:1},localPosition:{x:.22,y:-.13,z:.01}},events:{"INTERACTION.CLICK":!0}},{type:"mp.canvasRenderer",inputs:{textureRes:{w:128,h:128}}},{type:"mp.canvasImage",inputs:{src:"https://static.matterport.com/showcase-sdk/examples/assets-1.0-2-g6b74572/assets/textures/ff.png",srcPosition:{x:0,y:0,z:0},srcSize:{w:128,h:128},destPosition:{x:0,y:0,z:0},destSize:{w:128,h:128}}}],bindings:[[1,"src",0,"src"],[2,"src",1,"video"],[3,"texture",2,"texture"],[1,"enabled",4,"state"],[3,"aspect",1,"aspect"],[6,"painter",7,"painter"],[5,"texture",6,"texture"],[5,"aspect",1,"aspect"],[9,"painter",10,"painter"],[8,"texture",9,"texture"],[8,"visible",4,"negated"],[12,"painter",13,"painter"],[11,"texture",12,"texture"],[11,"visible",4,"state"]],events:[[4,"toggle",3,"INTERACTION.CLICK"],[0,"next",11,"INTERACTION.CLICK"],[12,"repaint",13,"paint.ready"]]}]},P={version:I,payload:M},N=""+new URL("tree-17eb7cf3.mp4",import.meta.url).href;let n;const O={components:{viewMove:h},setup(){const s=v(0);g(()=>{p().then(()=>{})});const p=async()=>{const e="pb1qi8tkyedf5n0ebfntibrrc",a=document.getElementById("showcase-iframe"),o=a.contentWindow;a.addEventListener("load",async function(){try{n=await o.MP_SDK.connect(o,e),window.mpSdk=n;const t=n.Camera.pose.subscribe({onChanged(i){const l=JSON.stringify(i.position);s.value=l}});m(),c(),u()}catch(t){console.error(t);return}console.log("Hello Bundle SDK",n)})},m=()=>{n.Mattertag.add([{label:"标签",description:"这是米大饭加的一个tag标签",anchorPosition:{x:0,y:0,z:0},stemVector:{x:0,y:.3,z:0},color:{r:0,g:0,b:1},floorIndex:0}]).then(e=>{n.Mattertag.editBillboard(e[0],{description:"[连接到米大饭的个人主页!](https://guigui267.github.io/XRworld/)"})}),n.Mattertag.add([{label:"标签2",description:"这是米大饭加的第二个标签",anchorPosition:{x:.5,y:0,z:1.5},stemVector:{x:0,y:.3,z:0},color:{r:1,g:0,b:0},floorIndex:0}]).then(e=>{n.Mattertag.editBillboard(e[0],{media:{type:n.Mattertag.MediaType.PHOTO,src:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fblog%2F202110%2F31%2F20211031215023_805c2.thumb.1000_0.png&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1677135567&t=0ea6866e875a8185dfcd8c1709e53ad2"}})})},c=async()=>{const[e]=await n.Scene.createObjects(1),a=e.addNode();a.addComponent("mp.lights"),a.start(),console.log(1,2,3,3,4,4);const o=e.addNode();window.modelNode=o,console.log(o,"ddededede");const t=o.addComponent(n.Scene.Component.GLTF_LOADER,{url:"/modern_arm_chair_01_2k.gltf/modern_arm_chair_01_2k.gltf"});o.obj3D.position.set(1,0,1),window.fbxComponent=t,console.log(t,"fbx模型组建"),o.start();const i=document.getElementById("videos");console.log(i,"视频dom"),window.videoDom=i,i.play(),i.addEventListener("play",function(){this.currentTime=3});const l=new t.context.three.PlaneGeometry(1,1,1),x=new t.context.three.MeshBasicMaterial({map:new t.context.three.VideoTexture(i),side:t.context.three.DoubleSide}),d=new t.context.three.Mesh(l,x);window.plane=d,d.rotateX(-Math.PI/2),d.position.y=1,t.context.scene.add(d)},u=async()=>{const e=new Map;e.set("AAWs9eZ9ip6",P),e.get("AAWs9eZ9ip6")};return{cameraPosition:s}}},y=s=>(S("data-v-7eb3f7f5"),s=s(),C(),s),T=y(()=>r("div",{id:"showDemo"},[r("iframe",{width:"853",height:"480",src:"./showcase-bundle/showcase.html?m=CPXXZBtLCK6&applicationKey=pb1qi8tkyedf5n0ebfntibrrc",frameborder:"0",allow:"fullscreen; vr",id:"showcase-iframe"},`
    `)],-1)),F={id:"viewMoves"},k=y(()=>r("video",{id:"videos",loop:"",crossOrigin:"anonymous",playsinline:"",style:{display:"none"}},[r("source",{src:N,type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})],-1));function B(s,p,m,c,u,e){const a=w("viewMove");return b(),_(R,null,[T,r("div",F,[z(a,{id:"moves",vPos:c.cameraPosition,"onUpdate:vPos":p[0]||(p[0]=o=>c.cameraPosition=o)},null,8,["vPos"]),k])],64)}const D=f(O,[["render",B],["__scopeId","data-v-7eb3f7f5"]]);export{D as default};
