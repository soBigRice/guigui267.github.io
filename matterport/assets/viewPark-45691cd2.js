import v from"./viewPanel2-12bfb20e.js";import _ from"./virtualHuman-0a965c10.js";import{_ as f,r as b,o as g,b as m,a as S,c as M,d as c,e as h,F as P,p as k,f as E}from"./index-538d5ed5.js";import"./converPosition-943e3ad4.js";const w=[{position:{x:14,y:0,z:-30},rotation:{x:0,y:0,z:0},way:1},{position:{x:14,y:0,z:-32},rotation:{x:0,y:0,z:0},way:1},{position:{x:14,y:0,z:-34},rotation:{x:0,y:0,z:0},way:1},{position:{x:14,y:0,z:-36},rotation:{x:0,y:0,z:0},way:1},{position:{x:10,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:8,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:6,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:4,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:2,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:0,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:-2,y:0,z:-28},rotation:{x:0,y:0,z:0},way:2},{position:{x:14,y:0,z:-24},rotation:{x:0,y:0,z:0},way:3},{position:{x:14,y:0,z:-23},rotation:{x:0,y:0,z:0},way:3},{position:{x:14,y:0,z:-22},rotation:{x:0,y:0,z:0},way:3},{position:{x:14,y:0,z:-21},rotation:{x:0,y:0,z:0},way:3},{position:{x:14,y:0,z:-20},rotation:{x:0,y:0,z:0},way:3},{position:{x:18,y:0,z:-28},rotation:{x:0,y:0,z:0},way:4},{position:{x:19,y:0,z:-28},rotation:{x:0,y:0,z:0},way:4},{position:{x:20,y:0,z:-28},rotation:{x:0,y:0,z:0},way:4},{position:{x:21,y:0,z:-28},rotation:{x:0,y:0,z:0},way:4},{position:{x:16,y:0,z:-16.8},rotation:{x:0,y:0,z:0},way:4},{position:{x:17,y:0,z:-16.8},rotation:{x:0,y:0,z:0},way:4},{position:{x:18,y:0,z:-16.8},rotation:{x:0,y:0,z:0},way:4},{position:{x:7,y:0,z:-26},rotation:{x:0,y:0,z:0},way:3},{position:{x:7,y:0,z:-24},rotation:{x:0,y:0,z:0},way:3},{position:{x:7,y:0,z:-22},rotation:{x:0,y:0,z:0},way:3},{position:{x:7,y:0,z:-20},rotation:{x:0,y:0,z:0},way:3},{position:{x:7,y:0,z:-18},rotation:{x:0,y:0,z:0},way:3},{position:{x:6,y:0,z:-11},rotation:{x:0,y:0,z:0},way:2},{position:{x:4,y:0,z:-11},rotation:{x:0,y:0,z:0},way:2},{position:{x:3,y:0,z:-11},rotation:{x:0,y:0,z:0},way:3},{position:{x:3,y:0,z:-9},rotation:{x:0,y:0,z:0},way:3},{position:{x:3,y:0,z:-7},rotation:{x:0,y:0,z:0},way:3},{position:{x:3,y:0,z:-5},rotation:{x:0,y:0,z:0},way:3}],z=[{position:{x:11.3,y:1.5,z:-25.4},rotation:{x:0,y:-.8,z:0},scale:{x:1,y:1,z:1}},{position:{x:11,y:2,z:-18},rotation:{x:0,y:1.5,z:0},scale:{x:2,y:2,z:2}}],x=[{position:{x:16.7,y:1.5,z:-30.7},rotation:{x:0,y:-.8,z:0},scale:{x:1,y:1,z:1},text:"你好"},{position:{x:14.1,y:2.48,z:-14},rotation:{x:0,y:0,z:0},scale:{x:-1,y:1,z:1},text:"牌子"}],B=(t,n,e,o,i="Hello World")=>{console.log(20);const a=document.createElement("canvas");a.width=100,a.height=100;var y=a.getContext("2d");y.fillStyle="#FF0000",y.font="30px Georgia",y.fillText(`${i}`,10,50);const s=new t.context.three.PlaneGeometry(2,2),l=new t.context.three.MeshBasicMaterial({map:new t.context.three.CanvasTexture(a),side:t.context.three.DoubleSide}),d=new t.context.three.Mesh(s,l);d.position.set(n.x,n.y,n.z),d.rotation.set(e.x,e.y,e.z),d.scale.set(o.x,o.y,o.z),t.context.scene.add(d)},D=t=>{N()};let r;const N=async t=>{const[n]=await mpSdk.Scene.createObjects(1),e=n.addNode();e.addComponent("mp.lights"),e.start();for(let o=0;o<w.length;o++)I(n,w[o].position,w[o].way);for(let o=0;o<z.length;o++)H(n,z[o].position,z[o].rotation,z[o].scale);for(let o=0;o<x.length;o++)B(r,x[o].position,x[o].rotation,x[o].scale,x[o].text)},I=(t,n,e)=>{const o=t.addNode(),i=o.addComponent(mpSdk.Scene.Component.GLTF_LOADER,{url:`/${e}.gltf`});i.inputs.localPosition={x:n.x,y:n.y,z:n.z},r=i,o.start()},H=(t,n,e,o)=>{const i=document.getElementById("videos");i.play(),t.addNode();const a=new r.context.three.PlaneGeometry(1,1),y=new r.context.three.MeshBasicMaterial({map:new r.context.three.VideoTexture(i),side:r.context.three.DoubleSide}),s=new r.context.three.Mesh(a,y);s.position.set(n.x,n.y,n.z),s.rotation.set(e.x,e.y,e.z),s.scale.set(o.x,o.y,o.z),r.context.scene.add(s)},K=""+new URL("allinone-4-71c5a60c.mp4",import.meta.url).href;let p;const O={components:{viewMove2:v,virtualHuman:_},setup(){const t=b(0);g(()=>{n()});const n=async()=>{const e="pb1qi8tkyedf5n0ebfntibrrc",o=document.getElementById("showcase-iframe"),i=o.contentWindow;o.addEventListener("load",async function(){try{p=await i.MP_SDK.connect(i,e),window.mpSdk=p,D(p);const a=p.Camera.pose.subscribe({onChanged(y){const s=JSON.stringify(y.position);t.value=s}})}catch(a){console.error(a);return}console.log("Hello Bundle SDK",p)})};return{cameraPosition:t}}},u=t=>(k("data-v-fbe1b171"),t=t(),E(),t),C=u(()=>c("div",{id:"showDemo"},[c("iframe",{width:"853",height:"480",src:"./showcase-bundle/showcase.html?m=mz1Hjrz7oEt&applicationKey=pb1qi8tkyedf5n0ebfntibrrc",frameborder:"0",allow:"fullscreen; vr",id:"showcase-iframe"},`
    `)],-1)),F={id:"viewMoves"},G={id:"human"},$=u(()=>c("video",{id:"videos",loop:"",crossOrigin:"anonymous",playsinline:"",style:{display:"none"}},[c("source",{src:K,type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'})],-1));function L(t,n,e,o,i,a){const y=m("viewMove2"),s=m("virtualHuman");return S(),M(P,null,[C,c("div",F,[h(y,{id:"moves",vPos:o.cameraPosition,"onUpdate:vPos":n[0]||(n[0]=l=>o.cameraPosition=l)},null,8,["vPos"])]),c("div",G,[h(s)]),$],64)}const W=f(O,[["render",L],["__scopeId","data-v-fbe1b171"]]);export{W as default};
